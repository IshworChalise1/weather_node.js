<!DOCTYPE html>
<html>
<head>
  <title>Weather App</title>
  <link rel="stylesheet" type="text/css" href="/style.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" />
</head>
<body>
  <div class="container">
    <h1>Weather App </h1>
    <form action="/weather" method="get">
      <input type="text" name="city" placeholder="Enter city name" />
      <button type="submit">Search</button>
    </form>
    <% if (error) { %>
      <p class="error"><%= error %></p>
    <% } else if (weather) { %>
      <div class="card">
        <p>
          <i class="fas fa-thermometer-half"></i>
          <%= Math.round(weather.main.temp) %>&deg;C
        </p>
        <p>
          <% 
            var condition = weather.weather[0].main.toLowerCase();
            var description = weather.weather[0].description;
            var iconClass;
            switch (condition) {
              case 'clear':
                iconClass = 'fas fa-sun'; // Sunny
                break;
              case 'clouds':
                iconClass = 'fas fa-cloud-sun'; // Partly cloudy or clear with clouds
                break;
              case 'rain':
                iconClass = 'fas fa-cloud-showers-heavy'; // Rainy
                break;
              case 'snow':
                iconClass = 'fas fa-snowflake'; // Snowy
                break;
              case 'thunderstorm':
                iconClass = 'fas fa-bolt'; // Thunderstorm
                break;
              default:
                iconClass = 'fas fa-question'; // Default or unknown
                break;
            }
          %>
          <i class="<%= iconClass %>"></i>
          <%= description %>
        </p>
        <p>
          <i class="fas fa-map-marker-alt"></i>
          <%= weather.name %>, <%= weather.sys.country %>
        </p>
        <p>
          <i class="fas fa-calendar-day"></i>
          <%= new Date((weather.dt + weather.timezone) * 1000).toLocaleDateString() %>
        </p>
      </div>
    <% } %>
  </div>
</body>
</html>
